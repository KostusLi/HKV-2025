hollow action proclaim(scroll title)
[
    confession "--- ";
    confession title;
    confession " ---";
    newleaf;
    comeback;
]

squire action calctax(squire income, squire rate)
[
    elder squire result;
    result = (income * rate) / 100;
    comeback result;
]

temple
[
    proclaim("KINGDOM STATUS REPORT");

    elder squire gold = 100;
    elder squire taxrate = 15;
    elder squire tax;
    
    tax = calctax(gold, taxrate);
    
    confession "Base Gold: "; confession gold; newleaf;
    confession "Tax collected: "; confession tax; newleaf;
    
    gold = gold + tax - 50; 
    confession "Treasury after expenses: "; confession gold; newleaf;

    newleaf;
    proclaim("ARMY TRAINING");

    elder squire knights = 0;
    elder squire maxkni = 5;

    check: knights @ maxkni #
    patrol [
        confession "Training knight number: "; 
        confession knights; 
        newleaf;
        knights = knights + 1;
    ]#
    
    confession "Army is ready!"; newleaf;

    newleaf;
    proclaim("WEAPONRY SELECTION");
    
    elder squire weap;
    weap = fortune(1, 4); 
    
    confession "Blacksmith forged weapon ID: "; confession weap; newleaf;

    council(weap)[
        path 1 [
            confession "We have a Sword!"; newleaf;
            escape;
        ]
        path 2 [
            confession "We have a Bow!"; newleaf;
            escape;
        ]
        path 3 [
            confession "We have an Axe!"; newleaf;
            escape;
        ]
        tiresome [
            confession "Peasants will fight with forks..."; newleaf;
            escape;
        ]
    ]

    newleaf;
    proclaim("MAGIC AND RUNES");

    elder squire mana = o12; 
    elder squire cost = 8;
    
    elder squire itemi = 7;
    elder squire itemik = 14;
    elder squire itemif = 20;

    elder squire resik = (5 + 6)*(4 - 2)+itemik/itemi + itemif;
    confession resik;
    newleaf;

    confession "Mana (octal o12 -> dec): "; confession mana; newleaf;
    
    elder squire power = 5; 
    elder squire artifact = 3;   
    elder squire combined;
    
    combined = power bitand artifact;
    confession "Bitwise AND (5 & 3): "; confession combined; newleaf;
    
    combined = power bitor artifact;
    confession "Bitwise OR (5 | 3): "; confession combined; newleaf;

    elder squire cursed = bitnot power;
    confession "Bitwise NOT (~5): "; confession cursed; newleaf;

    newleaf;
    proclaim("SCROLL ARCHIVE");

    elder scroll partone = "Royal ";
    elder scroll parttwo = "Decree";
    elder scroll fulldoc;
    
    fulldoc = consolidate(partone, parttwo);
    confession fulldoc; newleaf;

    elder squire len;
    len = filament(fulldoc);
    confession "Length of decree: "; confession len; newleaf;

    elder scroll numstr = "123";
    elder squire numval;
    numval = transmute(numstr);
    confession "String 123 to Squire: "; confession numval; newleaf;

    elder scroll original = "Ancient Secret";
    elder scroll copy;
    copy = oblivion(original);
    confession "Copy of scroll: "; confession copy; newleaf;

    elder squire issame;
    issame = comparescrolls(original, copy);

    check: issame & 1 #
    charge [ confession "Copy is perfect"; newleaf; ]
    backup [ confession "Copy failed"; newleaf; ]#

    newleaf;
    proclaim("FINAL BATTLE CALCULATION");

    elder squire damage = 50;
    elder squire hp = 100;
    
    damage = damage * 2;

    check: damage > hp #
    charge [
        confession "Hero wins with critical hit!";
    ]
    backup [
        confession "Hero needs to run!";
    ]#
    newleaf;

    proclaim("COMPLEX PRIORITY TEST");

    
    elder squire vala = 5;
    elder squire valb = 3;
    elder squire complexres;
    
    complexres = vala + valb * 2 bitand 12 bitor 1;
    
    confession "Calc: 5 + 3 * 2 bitand 12 bitor 1"; newleaf;
    confession "Expected: 9"; newleaf;
    confession "Result: "; confession complexres; newleaf;
    
    elder squire nottest;
    nottest = bitnot 0 + 5;
    confession "Calc: bitnot 0 + 5 (Expect 4): "; confession nottest; newleaf;

]